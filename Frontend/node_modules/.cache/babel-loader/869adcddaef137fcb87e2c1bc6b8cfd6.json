{"ast":null,"code":"import _toConsumableArray from \"/Users/phamthixuanhien/Desktop/code_RS_ptxhien/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/phamthixuanhien/Desktop/code_RS_ptxhien/Frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/phamthixuanhien/Desktop/code_RS_ptxhien/Frontend/src/Pages/Register/index.js\";\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport Slider from \"react-slick\";\nimport { Redirect } from \"react-router-dom\";\nimport bg3 from \"../../assets/utils/images/originals/citynights.jpg\";\nimport { Col, Row, Button, Form, FormGroup, Label, Input, Card, CardBody } from \"reactstrap\";\nimport MultiStep from \"../Forms/Elements/Wizard/Wizard\";\nimport Step1 from \"./Steps/step1\";\nimport Step2 from \"./Steps/step2\";\nimport Step3 from \"./Steps/step3\";\nimport { GetAllLanguageAction, GetAllTechnologyAction, GetFreeTimeAction, GetAllMajorAction } from \"../../redux/masterdata/masterDataAction\";\nimport { registerAction } from \"../../redux/actions/account/accountAction\";\nimport { toastErrorText } from \"../../helpers/toastify\";\nexport default function Register() {\n  var settings = {\n    dots: true,\n    infinite: true,\n    speed: 500,\n    arrows: true,\n    slidesToShow: 1,\n    slidesToScroll: 1,\n    fade: true,\n    initialSlide: 0,\n    autoplay: true,\n    adaptiveHeight: true\n  };\n  var dispatch = useDispatch();\n  var accountReducer = useSelector(function (state) {\n    return state.accountReducer;\n  });\n\n  var _useState = useState({\n    email: \"\",\n    password: \"\",\n    fullname: \"\",\n    gender: \"\",\n    city_id: \"\",\n    city: \"\",\n    district_id: \"\",\n    district: \"\",\n    ward_id: \"\",\n    ward: \"\",\n    learnerLevel: \"\",\n    language: [],\n    jobNow: \"\",\n    technologySkill: [],\n    feeMax: \"\",\n    feeMaxText: \"\",\n    freeTime: [],\n    futureSelfDevelopment: \"\",\n    fieldOfStudy: \"\",\n    address1: '',\n    cities: [],\n    districts: [],\n    wards: []\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      DTO = _useState2[0],\n      setDTO = _useState2[1];\n\n  var steps = [{\n    name: \"Account Information\",\n    component: /*#__PURE__*/React.createElement(Step1, {\n      DTO: DTO,\n      setDTO: setDTO,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 18\n      }\n    }),\n    shouldGoNext: false,\n    errors: []\n  }, {\n    name: \"Personal Information\",\n    component: /*#__PURE__*/React.createElement(Step2, {\n      DTO: DTO,\n      setDTO: setDTO,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 18\n      }\n    }),\n    shouldGoNext: false,\n    errors: []\n  }, {\n    name: \"Finish Register\",\n    component: /*#__PURE__*/React.createElement(Step3, {\n      DTO: DTO,\n      onClickRegister: onClickRegister,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 18\n      }\n    }),\n    shouldGoNext: true\n  }];\n\n  var _useState3 = useState([{\n    shouldGoNext: false,\n    errors: []\n  }, {\n    shouldGoNext: false,\n    errors: []\n  }, {\n    shouldGoNext: true,\n    errors: []\n  }]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      validSteps = _useState4[0],\n      setValidSteps = _useState4[1];\n\n  useEffect(function () {\n    dispatch(GetAllLanguageAction());\n    dispatch(GetAllTechnologyAction());\n    dispatch(GetFreeTimeAction());\n    dispatch(GetAllMajorAction());\n  }, []);\n\n  function onClickRegister() {\n    var addressArray = [];\n\n    if (DTO.ward) {\n      addressArray.push(DTO.ward);\n    }\n\n    if (DTO.district) {\n      addressArray.push(DTO.district);\n    }\n\n    if (DTO.city) {\n      addressArray.push(DTO.city);\n    }\n\n    var postdata = {\n      email: DTO.email,\n      password: DTO.password,\n      fullname: DTO.fullname,\n      gender: DTO.gender,\n      address: addressArray.length ? addressArray.join(', ') : null,\n      address1: DTO.address1 ? DTO.address1 : null,\n      learnerLevel: DTO.learnerLevel,\n      language: DTO.language.map(function (_ref) {\n        var lanName = _ref.lanName;\n        return lanName;\n      }).join(', '),\n      jobNow: DTO.jobNow,\n      technologySkill: DTO.technologySkill.map(function (_ref2) {\n        var techName = _ref2.techName;\n        return techName;\n      }).join(', '),\n      fieldOfStudy: DTO.fieldOfStudy,\n      feeMax: DTO.feeMax,\n      freeTime: DTO.freeTime && DTO.freeTime.join('|') || '',\n      futureSelfDevelopment: DTO.futureSelfDevelopment\n    };\n    dispatch(registerAction(postdata));\n  }\n\n  var checkFirstStep = function checkFirstStep() {\n    var errors = [];\n\n    if (!/^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/g.test(DTO.email)) {\n      errors.push(\"Email is not valid!\");\n    }\n\n    if (!/^(?=.*?[a-z|A-Z|0-9]).{8,}$/g.test(DTO.password)) {\n      errors.push(\"Password must have at least 8 characters\");\n    }\n\n    if (!DTO.fullname.trim()) {\n      errors.push(\"Invalid name\");\n    }\n\n    if (errors.length) {\n      return {\n        shouldGoNext: false,\n        errors: errors\n      };\n    }\n\n    return {\n      shouldGoNext: true,\n      errors: []\n    };\n  };\n\n  var checkSecondStep = function checkSecondStep() {\n    var errors = [];\n\n    if (!(DTO.language && DTO.language.length > 0)) {\n      errors.push(\"Please choose at least one language you know\");\n    }\n\n    if (!(DTO.technologySkill && DTO.technologySkill.length > 0)) {\n      errors.push(\"Please choose at least one technology skill you know\");\n    }\n\n    var count = 0;\n\n    if (DTO.address1) {\n      count++;\n    }\n\n    if (DTO.ward || DTO.wards.length == 0 && DTO.districts.length > 0) {\n      count++;\n    }\n\n    if (DTO.district) {\n      count++;\n    }\n\n    if (DTO.city) {\n      count++;\n    }\n\n    if (count > 0 && count < 4) {\n      // errors.push(\"bạn phải nhập đầy đủ địa chỉ\");\n      errors.push(\"You must type in the complete address (including house number, ward, district, city)\");\n    }\n\n    if (errors.length) {\n      return {\n        shouldGoNext: false,\n        errors: errors\n      };\n    }\n\n    return {\n      shouldGoNext: true,\n      errors: []\n    };\n  };\n\n  useEffect(function () {\n    var newValidSteps = _toConsumableArray(validSteps);\n\n    newValidSteps[0] = checkFirstStep();\n    newValidSteps[1] = checkSecondStep();\n    setValidSteps(newValidSteps);\n  }, [DTO]);\n  useEffect(function () {\n    if (accountReducer.error) {\n      toastErrorText(accountReducer.error);\n    }\n  }, [accountReducer]);\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 5\n    }\n  }, accountReducer.isLogged ? /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 8\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"no-gutters\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"7\",\n    md: \"12\",\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"main-card mb-3 \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CardBody, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    lg: \"9\",\n    md: \"10\",\n    sm: \"12\",\n    className: \"mx-auto app-login-box\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app-logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 21\n    }\n  }, \"Welcome,\"), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 21\n    }\n  }, \"It only takes a\", \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"text-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 23\n    }\n  }, \"few seconds\"), \" to create your account\"))), /*#__PURE__*/React.createElement(MultiStep, {\n    showNavigation: true,\n    steps: steps,\n    validSteps: validSteps,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(Col, {\n    lg: \"5\",\n    className: \"d-lg-flex d-xs-none\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"slider-light\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Slider, Object.assign({}, settings, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"h-100 d-flex justify-content-center align-items-center bg-premium-dark\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"slide-img-bg\",\n    style: {\n      backgroundImage: \"url(\" + bg3 + \")\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"slider-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 21\n    }\n  }, \"Scalable, Modular, Consistent\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 21\n    }\n  }, \"Easily exclude the components you don't require. Lightweight, consistent Bootstrap based styles across all elements and components\")))))))));\n}","map":{"version":3,"sources":["/Users/phamthixuanhien/Desktop/code_RS_ptxhien/Frontend/src/Pages/Register/index.js"],"names":["React","Fragment","useEffect","useState","useDispatch","useSelector","Slider","Redirect","bg3","Col","Row","Button","Form","FormGroup","Label","Input","Card","CardBody","MultiStep","Step1","Step2","Step3","GetAllLanguageAction","GetAllTechnologyAction","GetFreeTimeAction","GetAllMajorAction","registerAction","toastErrorText","Register","settings","dots","infinite","speed","arrows","slidesToShow","slidesToScroll","fade","initialSlide","autoplay","adaptiveHeight","dispatch","accountReducer","state","email","password","fullname","gender","city_id","city","district_id","district","ward_id","ward","learnerLevel","language","jobNow","technologySkill","feeMax","feeMaxText","freeTime","futureSelfDevelopment","fieldOfStudy","address1","cities","districts","wards","DTO","setDTO","steps","name","component","shouldGoNext","errors","onClickRegister","validSteps","setValidSteps","addressArray","push","postdata","address","length","join","map","lanName","techName","checkFirstStep","test","trim","checkSecondStep","count","newValidSteps","error","isLogged","backgroundImage"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Slider from \"react-slick\";\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\nimport bg3 from \"../../assets/utils/images/originals/citynights.jpg\";\r\n\r\nimport {\r\n  Col,\r\n  Row,\r\n  Button,\r\n  Form,\r\n  FormGroup,\r\n  Label,\r\n  Input,\r\n  Card,\r\n  CardBody,\r\n} from \"reactstrap\";\r\nimport MultiStep from \"../Forms/Elements/Wizard/Wizard\";\r\nimport Step1 from \"./Steps/step1\";\r\nimport Step2 from \"./Steps/step2\";\r\nimport Step3 from \"./Steps/step3\";\r\nimport {\r\n  GetAllLanguageAction,\r\n  GetAllTechnologyAction,\r\n  GetFreeTimeAction,\r\n  GetAllMajorAction,\r\n} from \"../../redux/masterdata/masterDataAction\";\r\nimport { registerAction } from \"../../redux/actions/account/accountAction\";\r\nimport { toastErrorText } from \"../../helpers/toastify\";\r\n\r\nexport default function Register() {\r\n  let settings = {\r\n    dots: true,\r\n    infinite: true,\r\n    speed: 500,\r\n    arrows: true,\r\n    slidesToShow: 1,\r\n    slidesToScroll: 1,\r\n    fade: true,\r\n    initialSlide: 0,\r\n    autoplay: true,\r\n    adaptiveHeight: true,\r\n  };\r\n\r\n  const dispatch = useDispatch();\r\n  const accountReducer = useSelector(state => state.accountReducer);\r\n\r\n  const [DTO, setDTO] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n    fullname: \"\",\r\n    gender: \"\",\r\n    city_id: \"\",\r\n    city: \"\",\r\n    district_id: \"\",\r\n    district: \"\",\r\n    ward_id: \"\",\r\n    ward: \"\",\r\n    learnerLevel: \"\",\r\n    language: [],\r\n    jobNow: \"\",\r\n    technologySkill: [],\r\n    feeMax: \"\",\r\n    feeMaxText: \"\",\r\n    freeTime: [],\r\n    futureSelfDevelopment: \"\",\r\n    fieldOfStudy: \"\",\r\n    address1: '',\r\n    cities: [],\r\n    districts: [],\r\n    wards: [],\r\n  });\r\n  const steps = [\r\n    {\r\n      name: \"Account Information\",\r\n      component: <Step1 DTO={DTO} setDTO={setDTO} />,\r\n      shouldGoNext: false,\r\n      errors: [],\r\n    },\r\n    {\r\n      name: \"Personal Information\",\r\n      component: <Step2 DTO={DTO} setDTO={setDTO} />,\r\n      shouldGoNext: false,\r\n      errors: [],\r\n    },\r\n    {\r\n      name: \"Finish Register\",\r\n      component: <Step3 DTO={DTO} onClickRegister={onClickRegister} />,\r\n      shouldGoNext: true,\r\n    },\r\n  ];\r\n  \r\n  const [validSteps, setValidSteps] = useState([\r\n    { shouldGoNext: false, errors: [] },\r\n    { shouldGoNext: false, errors: [] },\r\n    { shouldGoNext: true, errors: [] },\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    dispatch(GetAllLanguageAction());\r\n    dispatch(GetAllTechnologyAction());\r\n    dispatch(GetFreeTimeAction());\r\n    dispatch(GetAllMajorAction());\r\n  }, []);\r\n\r\n  function onClickRegister() {\r\n    let addressArray = [];\r\n    if (DTO.ward) {\r\n        addressArray.push(DTO.ward)\r\n    }\r\n    if (DTO.district) {\r\n        addressArray.push(DTO.district)\r\n    }\r\n    if (DTO.city) {\r\n        addressArray.push(DTO.city)\r\n    }\r\n    let postdata = {\r\n      email: DTO.email,\r\n      password: DTO.password,\r\n      fullname: DTO.fullname,\r\n      gender: DTO.gender,\r\n      address: addressArray.length ? addressArray.join(', ') : null,\r\n      address1: DTO.address1 ? DTO.address1 : null,\r\n      learnerLevel: DTO.learnerLevel,\r\n      language: DTO.language.map(({lanName}) => lanName).join(', '),\r\n      jobNow: DTO.jobNow,\r\n      technologySkill: DTO.technologySkill.map(({techName}) => techName).join(', '),\r\n      fieldOfStudy: DTO.fieldOfStudy,\r\n      feeMax: DTO.feeMax,\r\n      freeTime: DTO.freeTime && DTO.freeTime.join('|') || '',\r\n      futureSelfDevelopment: DTO.futureSelfDevelopment,\r\n    }\r\n    dispatch(registerAction(postdata));\r\n  }\r\n  \r\n  const checkFirstStep = () => {\r\n    const errors = [];\r\n\r\n    if (!/^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/g.test(DTO.email)){\r\n      errors.push(\"Email is not valid!\");\r\n    }\r\n    if (!/^(?=.*?[a-z|A-Z|0-9]).{8,}$/g.test(DTO.password)) {\r\n      errors.push(\"Password must have at least 8 characters\");\r\n    }\r\n    if (!DTO.fullname.trim()) {\r\n      errors.push(\"Invalid name\");\r\n    }\r\n    \r\n    if (errors.length) {\r\n      return {\r\n        shouldGoNext: false,\r\n        errors,\r\n      };\r\n    }\r\n\r\n    return {shouldGoNext: true, errors: []};\r\n  }\r\n\r\n  const checkSecondStep = () => {\r\n    const errors = [];\r\n    if(!(DTO.language && DTO.language.length > 0)) {\r\n      errors.push(\"Please choose at least one language you know\");\r\n    }\r\n    if (!(DTO.technologySkill && DTO.technologySkill.length > 0)) {\r\n      errors.push(\"Please choose at least one technology skill you know\");\r\n    }\r\n\r\n    let count = 0;\r\n    if (DTO.address1) {\r\n        count++;\r\n    }\r\n    if (DTO.ward || (DTO.wards.length == 0 && DTO.districts.length > 0)) {\r\n        count++;\r\n    }\r\n    if (DTO.district) {\r\n        count++;\r\n    }\r\n    if (DTO.city) {\r\n        count++;\r\n    }\r\n    if (count > 0 && count < 4) {\r\n      // errors.push(\"bạn phải nhập đầy đủ địa chỉ\");\r\n      errors.push(\"You must type in the complete address (including house number, ward, district, city)\")\r\n      \r\n    }\r\n\r\n    if (errors.length) {\r\n      return {\r\n        shouldGoNext: false,\r\n        errors,\r\n      };\r\n    }\r\n\r\n    return { shouldGoNext: true, errors: [] };\r\n  }\r\n\r\n  useEffect(() => {\r\n    const newValidSteps = [...validSteps];\r\n    newValidSteps[0] = checkFirstStep();\r\n    newValidSteps[1] = checkSecondStep();\r\n    setValidSteps(newValidSteps);\r\n\r\n  }, [DTO]);\r\n\r\n  useEffect(() =>{\r\n    if (accountReducer.error){\r\n      toastErrorText(accountReducer.error);\r\n    }\r\n  }, [accountReducer]);\r\n\r\n  return (\r\n    <Fragment>\r\n      {accountReducer.isLogged ? \r\n      (<Redirect to=\"/\"></Redirect>) : \r\n      (<div className=\"\">\r\n        <Row className=\"no-gutters\">\r\n          <Col lg=\"7\" md=\"12\" className=\"\">\r\n            <Card className=\"main-card mb-3 \">\r\n              <CardBody>\r\n                <Col lg=\"9\" md=\"10\" sm=\"12\" className=\"mx-auto app-login-box\">\r\n                  <div className=\"app-logo\" />\r\n                  <h4>\r\n                    <div>Welcome,</div>\r\n                    <span>\r\n                      It only takes a{\" \"}\r\n                      <span className=\"text-success\">few seconds</span> to\r\n                      create your account\r\n                    </span>\r\n                  </h4>\r\n                </Col>\r\n                <MultiStep showNavigation={true} steps={steps} validSteps={validSteps} />\r\n              </CardBody>\r\n            </Card>\r\n          </Col>\r\n          <Col lg=\"5\" className=\"d-lg-flex d-xs-none\">\r\n            <div className=\"slider-light\">\r\n              <Slider {...settings}>\r\n                <div className=\"h-100 d-flex justify-content-center align-items-center bg-premium-dark\">\r\n                  <div\r\n                    className=\"slide-img-bg\"\r\n                    style={{\r\n                      backgroundImage: \"url(\" + bg3 + \")\",\r\n                    }}\r\n                  />\r\n                  <div className=\"slider-content\">\r\n                    <h3>Scalable, Modular, Consistent</h3>\r\n                    <p>\r\n                      Easily exclude the components you don't require.\r\n                      Lightweight, consistent Bootstrap based styles across all\r\n                      elements and components\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </Slider>\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </div>)}\r\n    </Fragment>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}